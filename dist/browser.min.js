"use strict";(()=>{var F=Object.defineProperty;var S=(c,n)=>{for(var s in n)F(c,s,{get:n[s],enumerable:!0})};var E={};S(E,{md5:()=>Q,sha1:()=>G,sha256:()=>v});async function G(c){let n=new TextEncoder().encode(c);return crypto.subtle.digest("SHA-1",n).then(s=>Array.from(new Uint8Array(s)).map(g=>g.toString(16).padStart(2,"0")).join(""))}async function v(c){let n=new TextEncoder().encode(c);return crypto.subtle.digest("SHA-256",n).then(s=>Array.from(new Uint8Array(s)).map(g=>g.toString(16).padStart(2,"0")).join(""))}async function Q(c){var n="0123456789abcdef";function s(d){var m,x="";for(m=0;m<=3;m++)x+=n.charAt(d>>m*8+4&15)+n.charAt(d>>m*8&15);return x}function l(d,m){var x=(d&65535)+(m&65535),w=(d>>16)+(m>>16)+(x>>16);return w<<16|x&65535}function f(d,m){return d<<m|d>>>32-m}function g(d,m,x,w,y,A){return l(f(l(l(m,d),l(w,A)),y),x)}function u(d,m,x,w,y,A,I){return g(m&x|~m&w,d,m,y,A,I)}function p(d,m,x,w,y,A,I){return g(m&w|x&~w,d,m,y,A,I)}function h(d,m,x,w,y,A,I){return g(m^x^w,d,m,y,A,I)}function b(d,m,x,w,y,A,I){return g(x^(m|~w),d,m,y,A,I)}function B(d){var m,x=(d.length+8>>6)+1,w=new Array(x*16);for(m=0;m<x*16;m++)w[m]=0;for(m=0;m<d.length;m++)w[m>>2]|=d.charCodeAt(m)<<m%4*8;return w[m>>2]|=128<<m%4*8,w[x*16-2]=d.length*8,w}var a,i=B(""+c),e=1732584193,t=-271733879,r=-1732584194,o=271733878,N,k,U,W;for(a=0;a<i.length;a+=16)N=e,k=t,U=r,W=o,e=u(e,t,r,o,i[a+0],7,-680876936),o=u(o,e,t,r,i[a+1],12,-389564586),r=u(r,o,e,t,i[a+2],17,606105819),t=u(t,r,o,e,i[a+3],22,-1044525330),e=u(e,t,r,o,i[a+4],7,-176418897),o=u(o,e,t,r,i[a+5],12,1200080426),r=u(r,o,e,t,i[a+6],17,-1473231341),t=u(t,r,o,e,i[a+7],22,-45705983),e=u(e,t,r,o,i[a+8],7,1770035416),o=u(o,e,t,r,i[a+9],12,-1958414417),r=u(r,o,e,t,i[a+10],17,-42063),t=u(t,r,o,e,i[a+11],22,-1990404162),e=u(e,t,r,o,i[a+12],7,1804603682),o=u(o,e,t,r,i[a+13],12,-40341101),r=u(r,o,e,t,i[a+14],17,-1502002290),t=u(t,r,o,e,i[a+15],22,1236535329),e=p(e,t,r,o,i[a+1],5,-165796510),o=p(o,e,t,r,i[a+6],9,-1069501632),r=p(r,o,e,t,i[a+11],14,643717713),t=p(t,r,o,e,i[a+0],20,-373897302),e=p(e,t,r,o,i[a+5],5,-701558691),o=p(o,e,t,r,i[a+10],9,38016083),r=p(r,o,e,t,i[a+15],14,-660478335),t=p(t,r,o,e,i[a+4],20,-405537848),e=p(e,t,r,o,i[a+9],5,568446438),o=p(o,e,t,r,i[a+14],9,-1019803690),r=p(r,o,e,t,i[a+3],14,-187363961),t=p(t,r,o,e,i[a+8],20,1163531501),e=p(e,t,r,o,i[a+13],5,-1444681467),o=p(o,e,t,r,i[a+2],9,-51403784),r=p(r,o,e,t,i[a+7],14,1735328473),t=p(t,r,o,e,i[a+12],20,-1926607734),e=h(e,t,r,o,i[a+5],4,-378558),o=h(o,e,t,r,i[a+8],11,-2022574463),r=h(r,o,e,t,i[a+11],16,1839030562),t=h(t,r,o,e,i[a+14],23,-35309556),e=h(e,t,r,o,i[a+1],4,-1530992060),o=h(o,e,t,r,i[a+4],11,1272893353),r=h(r,o,e,t,i[a+7],16,-155497632),t=h(t,r,o,e,i[a+10],23,-1094730640),e=h(e,t,r,o,i[a+13],4,681279174),o=h(o,e,t,r,i[a+0],11,-358537222),r=h(r,o,e,t,i[a+3],16,-722521979),t=h(t,r,o,e,i[a+6],23,76029189),e=h(e,t,r,o,i[a+9],4,-640364487),o=h(o,e,t,r,i[a+12],11,-421815835),r=h(r,o,e,t,i[a+15],16,530742520),t=h(t,r,o,e,i[a+2],23,-995338651),e=b(e,t,r,o,i[a+0],6,-198630844),o=b(o,e,t,r,i[a+7],10,1126891415),r=b(r,o,e,t,i[a+14],15,-1416354905),t=b(t,r,o,e,i[a+5],21,-57434055),e=b(e,t,r,o,i[a+12],6,1700485571),o=b(o,e,t,r,i[a+3],10,-1894986606),r=b(r,o,e,t,i[a+10],15,-1051523),t=b(t,r,o,e,i[a+1],21,-2054922799),e=b(e,t,r,o,i[a+8],6,1873313359),o=b(o,e,t,r,i[a+15],10,-30611744),r=b(r,o,e,t,i[a+6],15,-1560198380),t=b(t,r,o,e,i[a+13],21,1309151649),e=b(e,t,r,o,i[a+4],6,-145523070),o=b(o,e,t,r,i[a+11],10,-1120210379),r=b(r,o,e,t,i[a+2],15,718787259),t=b(t,r,o,e,i[a+9],21,-343485551),e=l(e,N),t=l(t,k),r=l(r,U),o=l(o,W);return s(e)+s(t)+s(r)+s(o)}var R={};S(R,{LocalStorageAsync:()=>_,init:()=>L});var $="LocalStorageAsync",T="default",P=class{#e;constructor(n=""){let s=$;n&&(s=`${$}:${n}`);let l=indexedDB.open(s);l.onupgradeneeded=function(){l.result.createObjectStore(T)},this.#e=new Promise((f,g)=>{l.onsuccess=function(){let u=l.result;f(u)},l.onerror=function(){g(l.error)}})}async listItems(){let f=(await this.#e).transaction(T,"readonly").objectStore(T).getAllKeys();return new Promise(async(g,u)=>{f.onsuccess=()=>{g(f.result)},f.onerror=()=>{u(f.error)}})}async getItem(n){let g=(await this.#e).transaction(T,"readonly").objectStore(T).get(n);return new Promise(async(u,p)=>{g.onsuccess=()=>{g.result===void 0?u(null):u(g.result)},g.onerror=()=>{p(g.error)}})}async setItem(n,s){let u=(await this.#e).transaction(T,"readwrite").objectStore(T).put(s,n);return new Promise((p,h)=>{u.onsuccess=function(){p()},u.onerror=function(){h(u.error)}})}async removeItem(n){let g=(await this.#e).transaction(T,"readwrite").objectStore(T).delete(n);return new Promise((u,p)=>{g.onsuccess=function(){u()},g.onerror=function(){p(g.error)}})}async getItemJson(n){let s=await this.getItem(n);return s?JSON.parse(s):null}async setItemJson(n,s){let l=JSON.stringify(s,null,2);await this.setItem(n,l)}async close(){(await this.#e).close()}};var V="localStorageAsync";function L(c){let n=V;if(c&&(n+=`_${c}`),Reflect.has(window,n))return Reflect.get(window,n);let s=new P(c);return Reflect.set(window,n,s),s}var _=class{#e;constructor(n){this.#e=new P(n)}listItems(){return this.#e.listItems()}getItem(n){return this.#e.getItem(n)}setItem(n,s){return this.#e.setItem(n,s)}removeItem(n){return this.#e.removeItem(n)}getItemJson(n){return this.#e.getItemJson(n)}setItemJson(n,s){return this.#e.setItemJson(n,s)}close(){return this.#e.close()}};var C={};S(C,{slugify:()=>X,snakeToCamel:()=>Z,stripHtml:()=>ce,stripNaughtyCharacters:()=>D,titleCase:()=>le});function D(c){return c.replaceAll("\u2019","'").replaceAll("\xA0"," ").replaceAll("\u2013","-").replaceAll("\u2018","'")}var X=c=>c.toString().normalize("NFKD").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\_/g,"-").replace(/\-\-+/g,"-").replace(/\-$/g,"");var Z=c=>c.toLowerCase().replace(/([-_][a-z])/g,n=>n.toUpperCase().replace("-","").replace("_",""));var ee=new RegExp("<h[1-6][^>].*?</h[1-6]>","g"),te=new RegExp("<h[1-6]>.*?</h[1-6]>","g"),re=new RegExp("<pre>.*?</pre>","g"),oe=new RegExp("<pre[^>].*?</pre>","g"),ne=new RegExp("<code>.*?</code>","g"),se=new RegExp("<code[^>].*?</code>","g"),ae=new RegExp("&.*?;","g"),ie=new RegExp("(<([^>]+)>)","g");function ce(c,n=-1){let s=c.replaceAll(ee,"").replaceAll(te,"").replaceAll(oe,"").replaceAll(re,"").replaceAll(se,"").replaceAll(ne,"").replaceAll(ie,"").replaceAll(ae,"").replaceAll(`
`," ").replaceAll("	","").replaceAll("\r","");return n!==-1&&(s=s.substring(0,n)),D(s)}function le(c){for(var n=c.toLowerCase().split(" "),s=0;s<n.length;s++)n[s]=n[s].charAt(0).toUpperCase()+n[s].substring(1);return n.join(" ")}var q={};S(q,{createFrame:()=>fe,download:()=>de,getPageDocument:()=>pe,sleep:()=>ge,textToDomTemplate:()=>O});function O(c){let n=document.createElement("template");return n.innerHTML=c,n.content}var J={};S(J,{request:()=>H});function K(c){for(var n=window.atob(c),s=n.length,l=new Uint8Array(s),f=0;f<s;f++)l[f]=n.charCodeAt(f);return l.buffer}function M(c){return window.btoa(String.fromCharCode(...new Uint8Array(c)))}var me="request";async function z(c,n){if(n.method&&n.method!=="GET")return window.fetch(c,n);let s="";typeof c=="string"?s=await v(c):s=await v(c.url);let l={Meta:`${s}_meta`,Body:`${s}_body`},f=L(me),g=await f.getItemJson(l.Meta),u=await f.getItem(l.Body);if(g!==null&&u!==null){let a=K(u);return new Response(a,g)}let p=await fetch(c,n);if(!(p.status>=200&&p.status<=399))return p;let h={status:p.status,statusText:p.statusText,headers:{}};p.headers.forEach((a,i)=>h.headers[i]=a);let b=await p.arrayBuffer(),B=M(b);return await f.setItemJson(l.Meta,h),await f.setItem(l.Body,B),new Response(b,p)}async function Y(c,n={}){let s;n.storeInCache===void 0||n.storeInCache===!0?s=z:s=window.fetch;for(let l=0;l<(n.retries||500);l++){let f=await s(c,n);if(f.status>=200&&f.status<=399)return f;await new Promise(g=>setTimeout(g,5e3))}throw new Error(`Too many retries: ${c}`)}async function H(c,n={}){if(!c)throw new Error("No input provided");return Y(c,n)}async function pe(c,n){let l=await(await H(c,n)).text();return O(l)}async function fe(c,n){let s=document.createElement("iframe");s.src=c,s.style.position="fixed",s.style.display="block",s.style.top="0",n==="r"?s.style.right="0":s.style.left="0",s.style.height="50vh",s.style.width="50vw",s.style.zIndex="99999999999";let l=new Promise(p=>s.onload=p);document.body.appendChild(s),await l;let f=s.contentWindow,g=s.contentWindow.document;return[f,g,()=>s.parentElement.removeChild(s)]}var ge=c=>new Promise(n=>setTimeout(n,c));function de(c,n){var s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),s.setAttribute("download",c),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}var j={};S(j,{loadScript:()=>he});async function he(c){if(!c)throw new Error("No script source provided");let n=document.createElement("script");n.src=c;let s=new Promise(l=>n.onload=l);document.head.appendChild(n),await s}globalThis.alshx=globalThis.alshx||{};globalThis.alshx.crypto=E;globalThis.alshx.localStorage=R;globalThis.alshx.strings=C;globalThis.alshx.web=q;globalThis.alshx.scripts=j;globalThis.alshx.request=J;typeof globalThis.alshx_main=="function"&&globalThis.alshx_main();})();
